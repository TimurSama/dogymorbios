@tailwind base;
@tailwind components;
@tailwind utilities;

/* Плюшевый неоморфизм - Дизайн-система Dogymorbis */
/* Принцип: Мягкий объект в реальном свете (ткань, плюш, резиновая игрушка) */

:root {
  /* ============================================
     БАЗОВАЯ ПАЛИТРА (основана на зрении собак)
     ============================================ */
  
  /* Primary Blue - приглушённый, не электрический */
  --plush-primary-blue: #2F5DFF;
  --plush-primary-blue-pressed: #2548CC; /* темнее на 7% */
  --plush-primary-blue-elevated: #3A6AFF; /* светлее на 4% */
  
  /* Soft Sky - для акцентов */
  --plush-soft-sky: #A7C7FF;
  --plush-soft-sky-pressed: #9BB8E6;
  --plush-soft-sky-elevated: #B3D1FF;
  
  /* Warm Yellow - тёплый, матовый, без кислотности */
  --plush-warm-yellow: #F4C542;
  --plush-warm-yellow-pressed: #E5B63A;
  --plush-warm-yellow-elevated: #F9D05A;
  
  /* Cream Sand - основной фон */
  --plush-cream-sand: #F3E9D2;
  --plush-cream-sand-pressed: #E8DCC0;
  --plush-cream-sand-elevated: #F8F0E0;
  
  /* Graphite Dark - текст */
  --plush-graphite-dark: #1F1F23;
  --plush-graphite-dark-pressed: #18181B;
  --plush-graphite-dark-elevated: #26262A;
  
  /* Soft Shadow - тени */
  --plush-soft-shadow: #D6D6D6;
  
  /* Акцентная палитра */
  --plush-deep-navy: #1C2E5E;
  --plush-muted-brown: #8C6F4E;
  --plush-soft-beige-fur: #E5D3B3;
  
  /* ALERT - только для экстренных ситуаций */
  --plush-alert-red: #D64545;
  
  /* ============================================
     СИСТЕМА ГЛУБИНЫ (4 уровня)
     ============================================ */
  
  /* Level 0 - Фон (без тени) */
  --plush-depth-0: none;
  
  /* Level 1 - Карточки */
  /* Формула объёма: внешняя светлая тень + внешняя тёмная тень + внутренний градиент */
  --plush-depth-1-light: 0px 4px 20px rgba(255, 255, 255, 0.3);
  --plush-depth-1-dark: 0px 4px 20px rgba(0, 0, 0, 0.08);
  --plush-depth-1: var(--plush-depth-1-light), var(--plush-depth-1-dark);
  
  /* Level 2 - Активные кнопки */
  --plush-depth-2-light: 0px 6px 30px rgba(255, 255, 255, 0.35);
  --plush-depth-2-dark: 0px 6px 30px rgba(0, 0, 0, 0.10);
  --plush-depth-2: var(--plush-depth-2-light), var(--plush-depth-2-dark);
  
  /* Level 3 - Модальные окна / Alert */
  --plush-depth-3-light: 0px 8px 40px rgba(255, 255, 255, 0.4);
  --plush-depth-3-dark: 0px 8px 40px rgba(0, 0, 0, 0.12);
  --plush-depth-3: var(--plush-depth-3-light), var(--plush-depth-3-dark);
  
  /* Внутренние тени для эффекта вдавливания */
  --plush-inset-light: inset 0px 2px 4px rgba(255, 255, 255, 0.5);
  --plush-inset-dark: inset 0px 2px 4px rgba(0, 0, 0, 0.06);
  --plush-inset: var(--plush-inset-light), var(--plush-inset-dark);
  
  /* ============================================
     ОСВЕЩЕНИЕ (источник света сверху слева)
     ============================================ */
  --plush-light-source-x: -4px;
  --plush-light-source-y: -4px;
  
  /* ============================================
     СКРУГЛЕНИЯ
     ============================================ */
  --plush-radius-min: 16px;
  --plush-radius-card: 20px;
  --plush-radius-card-large: 24px;
  --plush-radius-button: 9999px; /* pill shape */
  
  /* ============================================
     ТИПОГРАФИКА (геометрический гротеск с мягкими формами)
     ============================================ */
  --plush-font-family: 'Inter', 'Manrope', 'SF Pro Rounded', ui-sans-serif, system-ui;
  
  --plush-h1-size: 32px;
  --plush-h1-weight: 600;
  --plush-h1-line-height: 40px;
  
  --plush-h2-size: 22px;
  --plush-h2-weight: 500;
  --plush-h2-line-height: 28px;
  
  --plush-body-size: 16px;
  --plush-body-weight: 400;
  --plush-body-line-height: 24px;
  
  --plush-caption-size: 13px;
  --plush-caption-weight: 400;
  --plush-caption-line-height: 18px;
  
  /* ============================================
     ПРОСТРАНСТВО И ВОЗДУХ
     ============================================ */
  --plush-spacing-base: 8px;
  --plush-spacing-card: 24px;
  --plush-spacing-block: 32px;
  
  /* ============================================
     АНИМАЦИИ (тактильные, премиальные)
     ============================================ */
  --plush-animation-duration: 200ms;
  --plush-animation-timing: cubic-bezier(0.4, 0, 0.2, 1);
  
  /* ============================================
     МИКРО-ТЕКСТУРА (для эффекта плюша)
     ============================================ */
  --plush-texture-opacity: 0.025;
  
  /* ============================================
     LEGACY (для совместимости)
     ============================================ */
  --md-sys-color-primary: var(--plush-primary-blue);
  --md-sys-color-on-primary: #FFFFFF;
  --md-sys-color-surface: var(--plush-cream-sand);
  --md-sys-color-on-surface: var(--plush-graphite-dark);
  --md-sys-color-background: var(--plush-cream-sand);
  --md-sys-color-on-background: var(--plush-graphite-dark);
  
  /* Dogymorbis Brand Colors - для совместимости */
  --dog-sky: var(--plush-soft-sky);
  --dog-honey: var(--plush-warm-yellow);
  --dog-burgundy: #A95056;
  --dog-chocolate: var(--plush-muted-brown);
  --dog-success: #86C8BC;
  --dog-warning: #E1A177;
  --dog-danger: var(--plush-alert-red);
  --dog-info: #7FA7D9;
  
  /* Elevation - Material 3 */
  /* Legacy elevation для совместимости */
  --md-elevation-level0: var(--plush-depth-0);
  --md-elevation-level1: var(--plush-depth-1);
  --md-elevation-level2: var(--plush-depth-2);
  --md-elevation-level3: var(--plush-depth-3);
  
  /* State Layer */
  --md-state-hover: rgba(28, 27, 31, 0.08);
  --md-state-pressed: rgba(28, 27, 31, 0.12);
  --md-state-focus: rgba(103, 80, 164, 0.12);
  --md-state-drag: rgba(28, 27, 31, 0.16);
  
  /* Typography - Material 3 */
  --md-sys-typescale-display-large-font: 'Inter', sans-serif;
  --md-sys-typescale-display-large-size: 57px;
  --md-sys-typescale-display-large-weight: 400;
  --md-sys-typescale-display-large-line-height: 64px;
  --md-sys-typescale-display-large-tracking: -0.25px;
  
  --md-sys-typescale-headline-large-size: 32px;
  --md-sys-typescale-headline-large-weight: 400;
  --md-sys-typescale-headline-large-line-height: 40px;
  
  --md-sys-typescale-title-large-size: 22px;
  --md-sys-typescale-title-large-weight: 400;
  --md-sys-typescale-title-large-line-height: 28px;
  
  --md-sys-typescale-body-large-size: 16px;
  --md-sys-typescale-body-large-weight: 400;
  --md-sys-typescale-body-large-line-height: 24px;
  --md-sys-typescale-body-large-tracking: 0.5px;
  
  --md-sys-typescale-label-large-size: 14px;
  --md-sys-typescale-label-large-weight: 500;
  --md-sys-typescale-label-large-line-height: 20px;
  --md-sys-typescale-label-large-tracking: 0.1px;
  
  /* Legacy variables for compatibility */
  --background: var(--md-sys-color-background);
  --surface: var(--md-sys-color-surface);
  --surface-2: var(--md-sys-color-surface-variant);
  --text-primary: var(--md-sys-color-on-surface);
  --text-secondary: var(--md-sys-color-on-surface-variant);
  --line: var(--md-sys-color-outline-variant);
  --outline: var(--md-sys-color-outline);
  
  --sky: var(--dog-sky);
  --honey: var(--dog-honey);
  --burgundy: var(--dog-burgundy);
  --chocolate: var(--dog-chocolate);
  --success: var(--dog-success);
  --warning: var(--dog-warning);
  --danger: var(--dog-danger);
  --info: var(--dog-info);
  
  --pastel-pink: var(--dog-pastel-pink);
  --pastel-lavender: var(--dog-pastel-lavender);
  --pastel-mint: var(--dog-pastel-mint);
  --pastel-peach: var(--dog-pastel-peach);
  --pastel-lilac: var(--dog-pastel-lilac);
  --pastel-rose: var(--dog-pastel-rose);
  
  --state-hover: var(--md-state-hover);
  --state-pressed: var(--md-state-pressed);
  --state-focus: var(--md-state-focus);
}

.dark {
  /* Dark Theme - Material 3 */
  --md-sys-color-primary: #D0BCFF;
  --md-sys-color-on-primary: #381E72;
  --md-sys-color-primary-container: #4F378B;
  --md-sys-color-on-primary-container: #EADDFF;
  
  --md-sys-color-secondary: #CCC2DC;
  --md-sys-color-on-secondary: #332D41;
  --md-sys-color-secondary-container: #4A4458;
  --md-sys-color-on-secondary-container: #E8DEF8;
  
  --md-sys-color-tertiary: #EFB8C8;
  --md-sys-color-on-tertiary: #492532;
  --md-sys-color-tertiary-container: #633B48;
  --md-sys-color-on-tertiary-container: #FFD8E4;
  
  --md-sys-color-error: #FFB4AB;
  --md-sys-color-on-error: #690005;
  --md-sys-color-error-container: #93000A;
  --md-sys-color-on-error-container: #FFDAD6;
  
  --md-sys-color-surface: #1C1B1F;
  --md-sys-color-on-surface: #E6E1E5;
  --md-sys-color-surface-variant: #49454F;
  --md-sys-color-on-surface-variant: #CAC4D0;
  
  --md-sys-color-outline: #938F99;
  --md-sys-color-outline-variant: #49454F;
  
  --md-sys-color-background: #1C1B1F;
  --md-sys-color-on-background: #E6E1E5;
  
  --md-state-hover: rgba(230, 225, 229, 0.08);
  --md-state-pressed: rgba(230, 225, 229, 0.12);
  --md-state-focus: rgba(208, 188, 255, 0.12);
  --md-state-drag: rgba(230, 225, 229, 0.16);
}

/* ============================================
   БАЗОВЫЕ СТИЛИ С МИКРО-ТЕКСТУРОЙ
   ============================================ */
body {
  background-color: var(--plush-cream-sand);
  color: var(--plush-graphite-dark);
  font-family: var(--plush-font-family);
  
  /* Микро-текстура для эффекта плюша */
  background-image: 
    /* Радиальный градиент для мягкости */
    radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
    /* Noise overlay для текстуры */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.025'/%3E%3C/svg%3E");
  
  background-attachment: fixed;
  background-size: 100% 100%, 100% 100%, 200px 200px;
  transition: background-color var(--plush-animation-duration) var(--plush-animation-timing), 
              color var(--plush-animation-duration) var(--plush-animation-timing);
}

/* ============================================
   ПЛЮШЕВЫЕ АНИМАЦИИ (тактильные, премиальные)
   ============================================ */
* {
  transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
  transition-timing-function: var(--plush-animation-timing);
  transition-duration: var(--plush-animation-duration);
}

/* Оптимизация для GPU */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Базовые стили */
@layer base {
  html {
    @apply antialiased;
  }
  
  h1 {
    font-size: var(--plush-h1-size);
    font-weight: var(--plush-h1-weight);
    line-height: var(--plush-h1-line-height);
  }
  
  h2 {
    font-size: var(--plush-h2-size);
    font-weight: var(--plush-h2-weight);
    line-height: var(--plush-h2-line-height);
  }
  
  h3 {
    font-size: var(--plush-h2-size);
    font-weight: var(--plush-h2-weight);
    line-height: var(--plush-h2-line-height);
  }
  
  p {
    font-size: var(--plush-body-size);
    font-weight: var(--plush-body-weight);
    line-height: var(--plush-body-line-height);
  }
  
  small {
    font-size: var(--plush-caption-size);
    font-weight: var(--plush-caption-weight);
    line-height: var(--plush-caption-line-height);
  }
}

/* ============================================
   КОМПОНЕНТНЫЕ УТИЛИТЫ - ПЛЮШЕВЫЙ НЕОМОРФИЗМ
   ============================================ */
@layer components {
  /* ============================================
     СИСТЕМА ГЛУБИНЫ (4 уровня)
     ============================================ */
  .plush-depth-0 {
    box-shadow: var(--plush-depth-0);
  }
  
  .plush-depth-1 {
    box-shadow: var(--plush-depth-1);
    border-radius: var(--plush-radius-card);
  }
  
  .plush-depth-2 {
    box-shadow: var(--plush-depth-2);
    border-radius: var(--plush-radius-card);
  }
  
  .plush-depth-3 {
    box-shadow: var(--plush-depth-3);
    border-radius: var(--plush-radius-card-large);
  }
  
  /* Внутренняя тень для эффекта вдавливания */
  .plush-inset {
    box-shadow: var(--plush-inset);
  }
  
  /* ============================================
     СКРУГЛЕНИЯ
     ============================================ */
  .plush-rounded {
    border-radius: var(--plush-radius-min);
  }
  
  .plush-rounded-card {
    border-radius: var(--plush-radius-card);
  }
  
  .plush-rounded-card-large {
    border-radius: var(--plush-radius-card-large);
  }
  
  .plush-rounded-pill {
    border-radius: var(--plush-radius-button);
  }
  
  /* ============================================
     ТАКТИЛЬНЫЕ АНИМАЦИИ
     ============================================ */
  /* Вдавливание при нажатии */
  .plush-press {
    transition: transform var(--plush-animation-duration) var(--plush-animation-timing),
                box-shadow var(--plush-animation-duration) var(--plush-animation-timing);
  }
  
  .plush-press:active {
    transform: scale(0.97);
    box-shadow: var(--plush-inset);
  }
  
  /* Подпрыгивание (для косточек, наград) */
  .plush-bounce {
    animation: plushBounce 250ms var(--plush-animation-timing);
  }
  
  @keyframes plushBounce {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.08);
    }
    100% {
      transform: scale(1);
    }
  }
  
  /* Плавное увеличение */
  .plush-grow {
    animation: plushGrow 200ms var(--plush-animation-timing);
  }
  
  @keyframes plushGrow {
    0% {
      transform: scale(0.95);
      opacity: 0.8;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  /* ============================================
     ВНУТРЕННИЙ ГРАДИЕНТ (для объёма)
     ============================================ */
  .plush-gradient {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(0, 0, 0, 0.02) 100%
    );
  }
  
  /* ============================================
     ПРОСТРАНСТВО И ВОЗДУХ
     ============================================ */
  .plush-spacing-card {
    padding: var(--plush-spacing-card);
  }
  
  .plush-spacing-block {
    margin-bottom: var(--plush-spacing-block);
  }
  
  /* ============================================
     TOUCH TARGET (минимум 48x48px)
     ============================================ */
  .touch-target {
    min-width: 48px;
    min-height: 48px;
  }
  
  /* ============================================
     LEGACY (для совместимости)
     ============================================ */
  .elevation-0 {
    box-shadow: var(--plush-depth-0);
  }
  
  .elevation-1 {
    box-shadow: var(--plush-depth-1);
  }
  
  .elevation-2 {
    box-shadow: var(--plush-depth-2);
  }
  
  .elevation-3 {
    box-shadow: var(--plush-depth-3);
  }
  
  .tap-compress {
    transition: transform var(--plush-animation-duration) var(--plush-animation-timing);
  }
  
  .tap-compress:active {
    transform: scale(0.97);
  }
  
  /* Safe Area для мобильных устройств */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Утилиты */
@layer utilities {
  /* Custom Scrollbar - Material 3 стиль */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--md-sys-color-outline-variant);
    border-radius: 4px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--md-sys-color-outline);
  }
  
  /* Скрытие scrollbar на мобильных */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Анимации - Material 3 Expressive */
  .fade-in {
    animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: opacity;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  .slide-up {
    animation: slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    will-change: transform, opacity;
  }
  
  @keyframes slideUp {
    from {
      transform: translate3d(0, 20px, 0);
      opacity: 0;
    }
    to {
      transform: translate3d(0, 0, 0);
      opacity: 1;
    }
  }
  
  /* Spring animation */
  .spring-in {
    animation: springIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  @keyframes springIn {
    0% {
      transform: scale(0.96);
      opacity: 0;
    }
    60% {
      transform: scale(1.02);
      opacity: 0.9;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  /* ============================================
     АНИМАЦИИ ДЛЯ КОСТОЧЕК (BoneCoin)
     ============================================ */
  @keyframes boneBounce {
    0%, 100% { 
      transform: translateY(0) rotate(0deg); 
    }
    25% { 
      transform: translateY(-4px) rotate(5deg); 
    }
    75% { 
      transform: translateY(-2px) rotate(-5deg); 
    }
  }
  
  @keyframes bonePulse {
    0%, 100% { 
      opacity: 1;
      transform: scale(1);
    }
    50% { 
      opacity: 0.8;
      transform: scale(1.05);
    }
  }

  @keyframes boneEarned {
    0% {
      transform: scale(0) rotate(-180deg);
      opacity: 0;
    }
    50% {
      transform: scale(1.2) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes boneGlow {
    0%, 100% {
      filter: drop-shadow(0 0 4px rgba(244, 197, 66, 0.5));
    }
    50% {
      filter: drop-shadow(0 0 8px rgba(244, 197, 66, 0.8));
    }
  }

  .bone-bounce {
    animation: boneBounce 1s ease-in-out infinite;
  }

  .bone-pulse {
    animation: bonePulse 2s ease-in-out infinite;
  }

  .bone-earned {
    animation: boneEarned 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .bone-glow {
    animation: boneGlow 2s ease-in-out infinite;
  }
  
  /* Оптимизация для мобильных */
  @media (max-width: 768px) {
    .fade-in,
    .slide-up {
      animation-duration: 0.2s;
    }
  }
}
