@tailwind base;
@tailwind components;
@tailwind utilities;

/* Material Design 3 Expressive - Дизайн-токены Dogymorbis */

:root {
  /* Light Theme - Material 3 Color System */
  --md-sys-color-primary: #6750A4;
  --md-sys-color-on-primary: #FFFFFF;
  --md-sys-color-primary-container: #EADDFF;
  --md-sys-color-on-primary-container: #21005D;
  
  --md-sys-color-secondary: #625B71;
  --md-sys-color-on-secondary: #FFFFFF;
  --md-sys-color-secondary-container: #E8DEF8;
  --md-sys-color-on-secondary-container: #1D192B;
  
  --md-sys-color-tertiary: #7D5260;
  --md-sys-color-on-tertiary: #FFFFFF;
  --md-sys-color-tertiary-container: #FFD8E4;
  --md-sys-color-on-tertiary-container: #31111D;
  
  --md-sys-color-error: #BA1A1A;
  --md-sys-color-on-error: #FFFFFF;
  --md-sys-color-error-container: #FFDAD6;
  --md-sys-color-on-error-container: #410002;
  
  --md-sys-color-surface: #FFFBFE;
  --md-sys-color-on-surface: #1C1B1F;
  --md-sys-color-surface-variant: #E7E0EC;
  --md-sys-color-on-surface-variant: #49454F;
  
  --md-sys-color-outline: #79747E;
  --md-sys-color-outline-variant: #CAC4D0;
  
  --md-sys-color-background: #FFFBFE;
  --md-sys-color-on-background: #1C1B1F;
  
  /* Dogymorbis Brand Colors - Pastel Accents */
  --dog-sky: #AFCBFF;
  --dog-honey: #E8DCA8;
  --dog-burgundy: #A95056;
  --dog-chocolate: #6B4B3E;
  --dog-success: #86C8BC;
  --dog-warning: #E1A177;
  --dog-danger: #E57C73;
  --dog-info: #7FA7D9;
  
  /* Pastel Palette */
  --dog-pastel-pink: #FFB3BA;
  --dog-pastel-lavender: #BAE1FF;
  --dog-pastel-mint: #BAFFC9;
  --dog-pastel-peach: #FFDFBA;
  --dog-pastel-lilac: #E6D5FF;
  --dog-pastel-rose: #FFD1DC;
  
  /* Elevation - Material 3 */
  --md-elevation-level0: none;
  --md-elevation-level1: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  --md-elevation-level2: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  --md-elevation-level3: 0px 1px 3px 0px rgba(0, 0, 0, 0.3), 0px 4px 8px 3px rgba(0, 0, 0, 0.15);
  --md-elevation-level4: 0px 2px 3px 0px rgba(0, 0, 0, 0.3), 0px 6px 10px 4px rgba(0, 0, 0, 0.15);
  --md-elevation-level5: 0px 4px 4px 0px rgba(0, 0, 0, 0.3), 0px 8px 12px 6px rgba(0, 0, 0, 0.15);
  
  /* State Layer */
  --md-state-hover: rgba(28, 27, 31, 0.08);
  --md-state-pressed: rgba(28, 27, 31, 0.12);
  --md-state-focus: rgba(103, 80, 164, 0.12);
  --md-state-drag: rgba(28, 27, 31, 0.16);
  
  /* Typography - Material 3 */
  --md-sys-typescale-display-large-font: 'Inter', sans-serif;
  --md-sys-typescale-display-large-size: 57px;
  --md-sys-typescale-display-large-weight: 400;
  --md-sys-typescale-display-large-line-height: 64px;
  --md-sys-typescale-display-large-tracking: -0.25px;
  
  --md-sys-typescale-headline-large-size: 32px;
  --md-sys-typescale-headline-large-weight: 400;
  --md-sys-typescale-headline-large-line-height: 40px;
  
  --md-sys-typescale-title-large-size: 22px;
  --md-sys-typescale-title-large-weight: 400;
  --md-sys-typescale-title-large-line-height: 28px;
  
  --md-sys-typescale-body-large-size: 16px;
  --md-sys-typescale-body-large-weight: 400;
  --md-sys-typescale-body-large-line-height: 24px;
  --md-sys-typescale-body-large-tracking: 0.5px;
  
  --md-sys-typescale-label-large-size: 14px;
  --md-sys-typescale-label-large-weight: 500;
  --md-sys-typescale-label-large-line-height: 20px;
  --md-sys-typescale-label-large-tracking: 0.1px;
  
  /* Legacy variables for compatibility */
  --background: var(--md-sys-color-background);
  --surface: var(--md-sys-color-surface);
  --surface-2: var(--md-sys-color-surface-variant);
  --text-primary: var(--md-sys-color-on-surface);
  --text-secondary: var(--md-sys-color-on-surface-variant);
  --line: var(--md-sys-color-outline-variant);
  --outline: var(--md-sys-color-outline);
  
  --sky: var(--dog-sky);
  --honey: var(--dog-honey);
  --burgundy: var(--dog-burgundy);
  --chocolate: var(--dog-chocolate);
  --success: var(--dog-success);
  --warning: var(--dog-warning);
  --danger: var(--dog-danger);
  --info: var(--dog-info);
  
  --pastel-pink: var(--dog-pastel-pink);
  --pastel-lavender: var(--dog-pastel-lavender);
  --pastel-mint: var(--dog-pastel-mint);
  --pastel-peach: var(--dog-pastel-peach);
  --pastel-lilac: var(--dog-pastel-lilac);
  --pastel-rose: var(--dog-pastel-rose);
  
  --state-hover: var(--md-state-hover);
  --state-pressed: var(--md-state-pressed);
  --state-focus: var(--md-state-focus);
}

.dark {
  /* Dark Theme - Material 3 */
  --md-sys-color-primary: #D0BCFF;
  --md-sys-color-on-primary: #381E72;
  --md-sys-color-primary-container: #4F378B;
  --md-sys-color-on-primary-container: #EADDFF;
  
  --md-sys-color-secondary: #CCC2DC;
  --md-sys-color-on-secondary: #332D41;
  --md-sys-color-secondary-container: #4A4458;
  --md-sys-color-on-secondary-container: #E8DEF8;
  
  --md-sys-color-tertiary: #EFB8C8;
  --md-sys-color-on-tertiary: #492532;
  --md-sys-color-tertiary-container: #633B48;
  --md-sys-color-on-tertiary-container: #FFD8E4;
  
  --md-sys-color-error: #FFB4AB;
  --md-sys-color-on-error: #690005;
  --md-sys-color-error-container: #93000A;
  --md-sys-color-on-error-container: #FFDAD6;
  
  --md-sys-color-surface: #1C1B1F;
  --md-sys-color-on-surface: #E6E1E5;
  --md-sys-color-surface-variant: #49454F;
  --md-sys-color-on-surface-variant: #CAC4D0;
  
  --md-sys-color-outline: #938F99;
  --md-sys-color-outline-variant: #49454F;
  
  --md-sys-color-background: #1C1B1F;
  --md-sys-color-on-background: #E6E1E5;
  
  --md-state-hover: rgba(230, 225, 229, 0.08);
  --md-state-pressed: rgba(230, 225, 229, 0.12);
  --md-state-focus: rgba(208, 188, 255, 0.12);
  --md-state-drag: rgba(230, 225, 229, 0.16);
}

/* Микрошум текстура */
body {
  background-color: var(--md-sys-color-background);
  color: var(--md-sys-color-on-surface);
  font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 
    'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.02'/%3E%3C/svg%3E");
  background-attachment: fixed;
  transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
              color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Material 3 Motion - Expressive */
* {
  transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}

/* Оптимизация для GPU */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Базовые стили */
@layer base {
  html {
    @apply antialiased;
  }
  
  h1 {
    font-size: var(--md-sys-typescale-display-large-size);
    font-weight: var(--md-sys-typescale-display-large-weight);
    line-height: var(--md-sys-typescale-display-large-line-height);
    letter-spacing: var(--md-sys-typescale-display-large-tracking);
  }
  
  h2 {
    font-size: var(--md-sys-typescale-headline-large-size);
    font-weight: var(--md-sys-typescale-headline-large-weight);
    line-height: var(--md-sys-typescale-headline-large-line-height);
  }
  
  h3 {
    font-size: var(--md-sys-typescale-title-large-size);
    font-weight: var(--md-sys-typescale-title-large-weight);
    line-height: var(--md-sys-typescale-title-large-line-height);
  }
  
  p {
    font-size: var(--md-sys-typescale-body-large-size);
    font-weight: var(--md-sys-typescale-body-large-weight);
    line-height: var(--md-sys-typescale-body-large-line-height);
    letter-spacing: var(--md-sys-typescale-body-large-tracking);
  }
  
  small {
    font-size: var(--md-sys-typescale-label-large-size);
    font-weight: var(--md-sys-typescale-label-large-weight);
    line-height: var(--md-sys-typescale-label-large-line-height);
    letter-spacing: var(--md-sys-typescale-label-large-tracking);
  }
}

/* Компонентные утилиты - Material 3 */
@layer components {
  /* State Layer */
  .state-layer {
    @apply relative overflow-hidden;
  }
  
  .state-layer::before {
    content: '';
    @apply absolute inset-0 opacity-0 transition-opacity duration-200 pointer-events-none;
    background-color: var(--md-state-hover);
  }
  
  .state-layer:hover::before {
    @apply opacity-100;
  }
  
  .state-layer:active::before {
    background-color: var(--md-state-pressed);
  }
  
  .state-layer:focus-visible::before {
    background-color: var(--md-state-focus);
  }
  
  /* Touch Target - минимум 48x48px для Material 3 */
  .touch-target {
    min-width: 48px;
    min-height: 48px;
  }
  
  /* Material 3 Elevation */
  .elevation-0 {
    box-shadow: var(--md-elevation-level0);
  }
  
  .elevation-1 {
    box-shadow: var(--md-elevation-level1);
  }
  
  .elevation-2 {
    box-shadow: var(--md-elevation-level2);
  }
  
  .elevation-3 {
    box-shadow: var(--md-elevation-level3);
  }
  
  .elevation-4 {
    box-shadow: var(--md-elevation-level4);
  }
  
  .elevation-5 {
    box-shadow: var(--md-elevation-level5);
  }
  
  /* Soft shadows для пастельного дизайна */
  .shadow-soft {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.06);
  }
  
  .shadow-soft-lg {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.10), 0 2px 6px rgba(0, 0, 0, 0.08);
  }
  
  /* Tap compression animation */
  .tap-compress {
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .tap-compress:active {
    transform: scale(0.98);
  }
  
  /* Safe Area для мобильных устройств */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Утилиты */
@layer utilities {
  /* Custom Scrollbar - Material 3 стиль */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--md-sys-color-outline-variant);
    border-radius: 4px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--md-sys-color-outline);
  }
  
  /* Скрытие scrollbar на мобильных */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Анимации - Material 3 Expressive */
  .fade-in {
    animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: opacity;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  .slide-up {
    animation: slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    will-change: transform, opacity;
  }
  
  @keyframes slideUp {
    from {
      transform: translate3d(0, 20px, 0);
      opacity: 0;
    }
    to {
      transform: translate3d(0, 0, 0);
      opacity: 1;
    }
  }
  
  /* Spring animation */
  .spring-in {
    animation: springIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  @keyframes springIn {
    0% {
      transform: scale(0.96);
      opacity: 0;
    }
    60% {
      transform: scale(1.02);
      opacity: 0.9;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  /* Оптимизация для мобильных */
  @media (max-width: 768px) {
    .fade-in,
    .slide-up {
      animation-duration: 0.2s;
    }
  }
}
